<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="../css/style.css">
  <link rel="stylesheet" href="../css/bootstrap.css">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Garamond&display=swap">
  <title>Kingdom of Ignoram - Spells</title>
</head>

<body class="bg-light text-dark">
  <nav class="navbar navbar-expand-lg navbar-dark sticky-top">
    <div class="container-fluid">
      <a class="navbar-brand" href="../index.html">Kingdom of Ignoram</a>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav"
        aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarNav">
        <ul class="navbar-nav ms-auto">
          <li class="nav-item"><a class="nav-link" href="../index.html">Home</a></li>
          <li class="nav-item"><a class="nav-link" href="./core.html">System Core</a></li>
          <li class="nav-item"><a class="nav-link" href="./character.html">Character Sheet</a></li>
          <li class="nav-item"><a class="nav-link" href="./diceroller.html">Dice Roller</a></li>
          <li class="nav-item"><a class="nav-link" href="./prompts.html">Adventures</a></li>
          <li class="nav-item"><a class="nav-link" href="./bestiary.html">Bestiary</a></li>
          <li class="nav-item"><a class="nav-link active" href="./spells.html">Spells</a></li>
        </ul>
      </div>
    </div>
  </nav>

  <div class="container py-5">
    <h1 class="text-center mb-4">Magic Spells For Knowledge Seekers</h1>

    <section class="mb-5">
      <h2>üìö Word Spells</h2>

      <div class="card mb-3">
        <div class="card-body">
          <h4 class="card-title">Storystorm</h4>
          <p><strong>Effect:</strong> Confuses enemies with imagination.</p>
          <p><strong>Difficulty:</strong> 12 | <strong>Target:</strong> 1‚Äì3 Enemies</p>
          <button class="btn btn-warning learn-spell" data-spell="Storystorm" data-cost="10" data-required-level="2">Learn Spell (10g)</button>
        </div>
      </div>

      <div class="card mb-3">
        <div class="card-body">
          <h4 class="card-title">The Rhyme That Time Forgot</h4>
          <p><strong>Effect:</strong> Freeze one creature with a forgotten rhyme.</p>
          <p><strong>Difficulty:</strong> 12 | <strong>Target:</strong> 1 enemy</p>
          <button class="btn btn-warning learn-spell" data-spell="The Rhyme That Time Forgot" data-cost="15" data-required-level="3">Learn Spell (15g)</button>
        </div>
      </div>
    </section>

    <section class="mb-5">
      <h2>üî¢ Math Spells</h2>

      <div class="card mb-3">
        <div class="card-body">
          <h4 class="card-title">Multiply Might</h4>
          <p><strong>Effect:</strong> Doubles strength for one round.</p>
          <p><strong>Difficulty:</strong> 10 | <strong>Target:</strong> Ally</p>
          <button class="btn btn-warning learn-spell" data-spell="Multiply Might" data-cost="12" data-required-level="2">Learn Spell (12g)</button>
        </div>
      </div>
    </section>

    <section class="mb-5">
      <h2>üé® Creative & Puzzle Spells</h2>

      <div class="card mb-3">
        <div class="card-body">
          <h4 class="card-title">Blueprint Blink</h4>
          <p><strong>Effect:</strong> Draw a plan and teleport 10 feet to a visible spot.</p>
          <p><strong>Difficulty:</strong> 13 | <strong>Target:</strong> Self</p>
          <button class="btn btn-warning learn-spell" data-spell="Blueprint Blink" data-cost="20" data-required-level="4">Learn Spell (20g)</button>
        </div>
      </div>
    </section>

    <section id="spell-builder" class="container mt-5 p-4 bg-light border rounded">
      <h2 class="mb-4">‚ú® Create Your Own Spell <span class="text-danger">(Cost: 500g)</span></h2>
      <form id="create-spell-form">
        <div class="mb-3">
          <label for="spellName" class="form-label">Spell Name</label>
          <input type="text" class="form-control" id="spellName" placeholder="E.g. 'Glitter Gust'">
        </div>
        <div class="mb-3">
          <label for="spellType" class="form-label">Type of Spell</label>
          <select class="form-select" id="spellType">
            <option>Word Magic</option>
            <option>Math Magic</option>
            <option>Creative Magic</option>
            <option>Memory Magic</option>
          </select>
        </div>
        <div class="mb-3">
          <label for="spellEffect" class="form-label">What does it do?</label>
          <textarea class="form-control" id="spellEffect" rows="3"></textarea>
        </div>
        <div class="mb-3">
          <label for="spellTarget" class="form-label">Target or Range</label>
          <input type="text" class="form-control" id="spellTarget">
        </div>
        <div class="mb-3">
          <label for="spellDifficulty" class="form-label">Difficulty</label>
          <select class="form-select" id="spellDifficulty">
            <option value="Easy">Easy (7+)</option>
            <option value="Medium">Medium (10+)</option>
            <option value="Hard">Hard (15+)</option>
            <option value="Boss">Boss Level (18+)</option>
          </select>
        </div>
        <button type="submit" class="btn btn-primary">‚ú® Create Custom Spell</button>
      </form>

      <hr class="my-4">
      <div id="spellPreview" class="p-4 border rounded bg-white shadow-sm d-none">
        <h3 id="previewName" class="text-primary"></h3>
        <p><strong>Type:</strong> <span id="previewType"></span></p>
        <p><strong>Effect:</strong> <span id="previewEffect"></span></p>
        <p><strong>Target:</strong> <span id="previewTarget"></span></p>
        <p><strong>Difficulty:</strong> <span id="previewDifficulty"></span></p>
      </div>
    </section>
  </div>

  <footer class="footer">
    <div class="text-center py-4 bg-dark text-light">
      <p>Made with üßô‚Äç‚ôÇÔ∏è magic and üìö learning</p>
      <p>&copy; 2025 Kingdom of Ignoram. All rights reserved.</p>
      <p>Created by StudiousCorgi (Asia Brown-Haller)</p>
    </div>
  </footer>

  <script src="../js/bootstrap.bundle.js"></script>
  <script>
    // Load gold and level from character if saved
    let playerData = JSON.parse(localStorage.getItem("characterData")) || { level: 1, gold: 0, knownSpells: [] };

    // Learn Spell
    document.querySelectorAll(".learn-spell").forEach(btn => {
      btn.addEventListener("click", () => {
        const spell = btn.dataset.spell;
        const cost = parseInt(btn.dataset.cost);
        const level = parseInt(btn.dataset.requiredLevel);

        if (playerData.level < level) {
          alert("You must be at least level " + level + " to learn this spell.");
          return;
        }

        if (playerData.gold < cost) {
          alert("Not enough gold!");
          return;
        }

        if (!playerData.knownSpells.includes(spell)) {
          playerData.knownSpells.push(spell);
          playerData.gold -= cost;
          alert(`${spell} learned! (${cost}g spent)`);
          localStorage.setItem("characterData", JSON.stringify(playerData));
        }
      });
    });

    // Create Custom Spell
    document.getElementById("create-spell-form").addEventListener("submit", e => {
      e.preventDefault();
      if (playerData.gold < 500) {
        alert("You need 500 gold to create a custom spell!");
        return;
      }

      const name = document.getElementById("spellName").value;
      const type = document.getElementById("spellType").value;
      const effect = document.getElementById("spellEffect").value;
      const target = document.getElementById("spellTarget").value;
      const difficulty = document.getElementById("spellDifficulty").value;

      document.getElementById("previewName").textContent = name;
      document.getElementById("previewType").textContent = type;
      document.getElementById("previewEffect").textContent = effect;
      document.getElementById("previewTarget").textContent = target;
      document.getElementById("previewDifficulty").textContent = difficulty;
      document.getElementById("spellPreview").classList.remove("d-none");

      playerData.gold -= 500;
      alert(`${name} has been created and previewed! (-500g)`);
      localStorage.setItem("characterData", JSON.stringify(playerData));
    });
  </script>
</body>

</html>
